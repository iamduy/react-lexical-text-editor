{"version":3,"sources":["../node_modules/@lexical/mark/LexicalMark.prod.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{ElementNode as t,$isRangeSelection as e,$applyNodeReplacement as r,defineExtension as n,$createRangeSelection as s,$isElementNode as i,$isTextNode as o,$isDecoratorNode as c}from\"lexical\";import{addClassNamesToElement as u,removeClassNamesFromElement as l}from\"@lexical/utils\";const a=[];class f extends t{__ids;static getType(){return\"mark\"}static clone(t){return new f(t.__ids,t.__key)}static importDOM(){return null}static importJSON(t){return d().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIDs(t.ids)}exportJSON(){return{...super.exportJSON(),ids:this.getIDs()}}constructor(t=a,e){super(e),this.__ids=t}createDOM(t){const e=document.createElement(\"mark\");return u(e,t.theme.mark),this.__ids.length>1&&u(e,t.theme.markOverlap),e}updateDOM(t,e,r){const n=t.__ids,s=this.__ids,i=n.length,o=s.length,c=r.theme.markOverlap;return i!==o&&(1===i?2===o&&u(e,c):1===o&&l(e,c)),!1}hasID(t){return this.getIDs().includes(t)}getIDs(){return Array.from(this.getLatest().__ids)}setIDs(t){const e=this.getWritable();return e.__ids=t,e}addID(t){const e=this.getWritable();return e.__ids.includes(t)?e:e.setIDs([...e.__ids,t])}deleteID(t){const e=this.getWritable(),r=e.__ids.indexOf(t);if(-1===r)return e;const n=Array.from(e.__ids);return n.splice(r,1),e.setIDs(n)}insertNewAfter(t,e=!0){const r=d(this.__ids);return this.insertAfter(r,e),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!e(r)||\"html\"===n)return!1;const s=r.anchor,i=r.focus,o=s.getNode(),c=i.getNode(),u=r.isBackward()?s.offset-i.offset:i.offset-s.offset;return this.isParentOf(o)&&this.isParentOf(c)&&this.getTextContent().length===u}excludeFromCopy(t){return\"clone\"!==t}}function d(t=a){return r(new f(t))}function h(t){return t instanceof f}function _(t){const e=t.getChildren();let r=null;for(let n=0;n<e.length;n++){const s=e[n];null===r?t.insertBefore(s):r.insertAfter(s),r=s}t.remove()}function m(t,e,r,n){const u=s(),[l,a]=t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];let f,_;u.anchor.set(l.key,l.offset,l.type),u.focus.set(a.key,a.offset,a.type);const m=u.extract();for(const t of m){if(i(_)&&_.isParentOf(t))continue;let e=null;if(o(t))e=t;else{if(h(t))continue;(i(t)||c(t))&&t.isInline()&&(e=t)}if(null!==e){if(e&&e.is(f))continue;const t=e.getParent();if(null!=t&&t.is(f)||(_=void 0),f=t,void 0===_){_=(n||d)([r]),e.insertBefore(_)}_.append(e)}else f=void 0,_=void 0}i(_)&&(e?_.selectStart():_.selectEnd())}function g(t,e){let r=t;for(;null!==r;){if(h(r))return r.getIDs();if(o(r)&&e===r.getTextContentSize()){const t=r.getNextSibling();if(h(t))return t.getIDs()}r=r.getParent()}return null}const p=n({name:\"@lexical/mark\",nodes:()=>[f]});export{d as $createMarkNode,g as $getMarkIDs,h as $isMarkNode,_ as $unwrapMarkNode,m as $wrapSelectionInMarkNode,p as MarkExtension,f as MarkNode};\n"],"mappings":"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","names":["t","e","r","n","s","i","o","c","u","l","a","f","_","m"]}